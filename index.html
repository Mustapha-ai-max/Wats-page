              <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.473-.148-.673.15-.2.297-.773.967-.947 1.165-.174.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.476-.883-.788-1.48-1.41-1.654-1.708-.174-.297-.018-.458.13-.606.134-.132.297-.347.446-.52.149-.174.198-.298.298-.497.1-.198.05-.372-.025-.52-.075-.149-.673-1.62-.922-2.22-.244-.573-.492-.495-.673-.505l-.574-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.48 1.065 2.876 1.213 3.074c.149.198 2.096 3.2 5.077 4.487 0 0 .397.167.717.09.32-.074 1.01-.41 1.154-.807.149-.397.149-.74.105-.807-.044-.066-.198-.099-.446-.248z" fill="#fff"/>
            </svg>
            انضم للمجموعة الآن
          </button>
        </div>

        <footer class="note">في حال لم يُفتح التطبيق، سيتم تحويلك إلى صفحة الويب لعرض الدعوة.</footer>
      </div>

      <aside class="right" aria-hidden="true">
        <p><strong>رمز المجموعة</strong></p>
        <div id="groupCodeDisplay" style="font-size:18px;font-weight:600;margin-bottom:8px;color:var(--accent)">GDua6Q2BMHoHjgMudafBMI</div>
        <p class="small">سيتم فتح الرابط مباشرة في تطبيق واتساب إذا كان مثبتًا. يعمل هذا أيضاً على الأجهزة المكتبية بفتح واجهة الويب الخاصة بواتساب.</p>
      </aside>
    </div>
  </div>

  <script>
  (function(){
    // 🔹 Get the group ID from the URL (e.g., ?groupid=ABCD123)
    const params = new URLSearchParams(window.location.search);
    const groupCode = params.get('groupid') || 'DjzZhd60uaX6LiKCnV9oXE'; // fallback default if not provided

    // 🔹 Build WhatsApp URLs dynamically
    const webUrl = 'https://chat.whatsapp.com/' + groupCode;
    const intentUrl = 'intent://chat.whatsapp.com/' + groupCode + '#Intent;package=com.whatsapp;scheme=https;end';
    const joinBtn = document.getElementById('joinBtn');

    // 🔹 Update the group code text on the right panel
    const codeEl = document.querySelector('.right div');
    if (codeEl) codeEl.textContent = groupCode;

    // 🔹 Device detection helpers
    function isiOS() {
      return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
    }
    function isAndroid() {
      return /Android/.test(navigator.userAgent);
    }

    // 🔹 Handle button click
    joinBtn.addEventListener('click', function () {
      if (isAndroid()) {
        // Android → try intent first, then fallback
        window.location.href = intentUrl;
        setTimeout(function(){ window.open(webUrl, '_blank'); }, 1200);
      } else if (isiOS()) {
        // iOS → use https link (opens in app if installed)
        window.location.href = webUrl;
      } else {
        // Desktop → open in new tab
        window.open(webUrl, '_blank', 'noopener,noreferrer');
      }
    });

    // 🔹 Keyboard accessibility
    joinBtn.addEventListener('keyup', function(e){
      if (e.key === 'Enter' || e.key === ' ') joinBtn.click();
    });
  })();
</script>

</body>
</html>
